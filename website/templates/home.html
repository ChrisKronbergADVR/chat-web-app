{% extends "base.html" %} {% block title %}Home{% endblock %} {% block content%}

<div class="row" width = "max-width" id = "mainRow" >
  <div class="col-8" id = "columnLeft">
    <!--width="fixed"  padding-right="200rem"-->
    <br>
    <br>

    <h4 align="left" id="tHel" class="userN">
      Hello, {{current_user.first_name}}
    </h4>
    
    <br>

    <p class="userMessage">
      Add Users to a message below, <br>
      seperating them with a comma (<b> , </b>)
    </p>

    <!--SEND USERS AREA-->
    <div class="input-group mb-3 shadow p-3" id="SendUsers">
      <div class="input-group-prepend">
        <span class="input-group-text" id="basic-addon1">@</span>
      </div>
      <input type="text" name="userInput" id="usersADD" class="form-control" placeholder="Usernames" aria-label="Username" aria-describedby="basic-addon1"/>
      &nbsp;
      <div type="button" id="addIT" class="btn btn-sm" onclick="addUser()">
        <span><img src="../static/images/addPerson.png" width="25rem" height="30rem"/></span>
      </div>
    </div>
    <!--END SEND USERS AREA-->
    <br>
    <!--ALL MESSAGES-->
    <div class="overflow-auto shadow p-3 mb-3" id="messageArea">
      <ul class="list-group list-group-flush" id="log">
        {%for note in allNotes%} 
          {%if current_user.first_name == note.user.first_name%}
            <li class="list-group-item colorClass" id="chatStuff">
              {{"You: " + note.data}}
              <div id="edDel">
                <div type="button" class = "btn" id="editB" data-bs-toggle="modal" data-bs-target="#editModalCenter" onclick = "editNote('{{note.id}}','{{note.data}}')">
                  <img src="../static/images/edit.png" id="editImage"/>
                </div>
                <button type="button" class="btn-close" id="closeX" aria-label="Close" onclick="deleteNote('{{note.id}}')"></button>
              </div>
            </li>
          {%else%}
            <li class="list-group-item" id="otherList">
              {{note.user.first_name + ": " + note.data}}
            </li>
          {%endif%} 
        {% endfor %}
      </ul>
    </div>
    <!--END ALL MESSAGES-->

    <br>

    <!--MESSAGE AREA-->
    <div id = "sendArea">
      <form name="messForm" id="broadcast" method="POST" class="input-group mb-3 shadow" action="/">
        <textarea type="text" name="broadcast_data" id="broadcast_data" class="form-control"></textarea>
        <div id="submitBlock">
          <input type="submit" value="" id="submitMessage">
        </div>
      </form>
    </div>
    <!--END MESSAGE AREA-->

    <br>

    <!--Modal used when update button is clicked-->
    <div class="modal fade" id="editModalCenter" data-bs-backdrop="static" tabindex="-1" role="dialog" aria-labelledby="editTitle" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content" id = "mod">

          <div class = "modal-header" id = "modHead">
            <h5 class = "modal-title" id = "editTitle" width = "max-width">Edit Message</h5>
            <button type = "button" id="modClose" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>

          <form id = "editForm" method="POST" action="/"> 
            <div class="modal-body" id = "modBody">
              <textarea type = "text" id = "modalEdit"></textarea>
            </div>

            <div class="modal-footer" id = "modFoot">
              <button type="button" id = "closeModal" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
              <button id = "updateSubmit" type="submit" class="btn btn-primary">Update</button>
            </div>
          </form> 
        </div>
      </div>
    </div>
    <!--End of modal code--> 

  </div>
  <!--End of Left Column with Message Area-->

  <!--Right side Column-->
  <div class="col-4" id = "columnRight">
    <br />
    <br />

    <!--
    <div>
      <p>
        Async mode is: <b>{{async_mode}}</b><br />
        Current transport is: <b><span id="transport"></span></b><br />
        Average ping/pong latency: <b><span id="ping-pong"></span>ms</b>
      </p>
    </div>
    -->
    
    <br>
    <br>

    <h5>Users</h5>
    <!--<button type="button" id="sideAdd" class="btn btn-info btn-sm">Add</button>-->
    <br>
    <div class="UserList rounded overflow-auto" style="height: 10rem">
      <ul>
        {%for user in users%}
          {%if user != current_user%}
          <li id = "dMessage"><a id = "userLink" data-bs-toggle = "tooltip" data-bs-placement="left" title="click to DM">{{user.first_name}}</a>
            {%if user.user_online == true%}
              <style>#userLink {color: green;}</style>
            {%else%}
              <style>#userLink {color: red;}</style>
            {%endif%}
          </li>
          {%endif%}
        {%endfor%}
      </ul>
    </div>

    <br>

    <h5>Channels</h5>
    <br>
    <!--<button type="button" id="sideAdd" class="btn btn-info btn-sm">Add</button>-->
    <div class="UserList rounded overflow-auto" style="height: 10rem">
      <p>
        channel1
      </p>
    </div>

  </div>
  <!--End of Right side Column-->
  </div>
{% endblock %}